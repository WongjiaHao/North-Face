<!--
 * @Author: Wenjiahao
 * @Date: 2022-08-29 17:43:57
 * @LastEditors: wenjiahao
 * @LastEditTime: 2022-09-06 19:04:28
 * @FilePath: \North-face\HTML\goodsList.html
 * @Description: 
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../../North-face/font/iconfont.css">
    <link rel="stylesheet" href="../../North-face/CSS/header/header.css">
    <link rel="stylesheet" href="../../North-face/CSS/footer/footer.css">
    <link rel="stylesheet" href="../CSS/goodsList/goodsList.css">
</head>

<body>
    <header></header>
    <main>
    <div class="w">
        <div class="nav">
            <span class="nav-1">男子</span>&nbsp;&gt;&nbsp;<span class="nav-2">男士上装</span>&nbsp;&gt;&nbsp;<span class="nav-3">T恤/POLO衫</span>
        </div>
        <div class="screen">
            <ul><!-- 筛选 -->
                <li>性别
                    <div class="selectBy"> 
                        <div>不限</div>
                        <div>男</div>
                        <div>女</div>
                        <div>通用</div>
                        <div>儿童</div>
                        <div>男童</div>
                        <div>女童</div>
                        <div>幼童</div>
                    </div>
                   
                </li>
                <li>
                    专业指数
                    <div class="selectBy"> 
                        <div>不限</div>
                        <div>入门级</div>
                        <div>高性价比</div>
                        <div>专业级</div>
                    </div>
                </li>
                <li>
                    适用场景
                    <div class="selectBy"> 
                        <div>不限</div>
                        <div>徒步</div>
                        <div>跑步</div>
                        <div>通勤</div>
                        <div>登山</div>
                        <div>训练</div>
                    </div>
                </li>
                <li>
                    科技
                    <div class="selectBy"> 
                        <div>不限</div>
                        <div>FlashDry/快干</div>
                        <div> Dryvent/防水透气</div>
                        <div>Gore-Tex/持久防水</div>
                        <div>VibramMegag/抓地耐磨</div>

                    </div>
                </li>
                <li>
                    颜色
                </li>
                <li>
                    尺寸
                </li>
                <li>    
                    配件尺寸
                </li>
                <li>
                    排序
                    <div class="selectBy"> 
                        <div>不限</div>
                        <div>按价格 从高到低</div>
                        <div>按价格 从低到高</div>
                        <div>按销量</div>


                    </div>
                </li>
            </ul>
        </div>
<!--         <button class="test">test</button>
        <button class="test2">test</button> -->
        <div class="list">
            <!-- <ul>
                <li><div class="good-item"><a href="#"><img src="../images/list.jpg" alt=""></a><a href="#"><p>TheNorthFace北面短袖T恤男户外舒适透气秋季上新|7QUX</p></a><span>￥398.00</span></div></li>
                <li><div class="good-item"><a href="#"><img src="" alt=""></a><a href="#"><p></p></a><span></span></div></li>
                <li><div class="good-item"><a href="#"><img src="" alt=""></a><a href="#"><p></p></a><span></span></div></li>
                <li><div class="good-item"><a href="#"><img src="" alt=""></a><a href="#"><p></p></a><span></span></div></li>
                <li><div class="good-item"><a href="#"><img src="" alt=""></a><a href="#"><p></p></a><span></span></div></li>
                <li><div class="good-item"><a href="#"><img src="" alt=""></a><a href="#"><p></p></a><span></span></div></li>
                <li><div class="good-item"><a href="#"><img src="" alt=""></a><a href="#"><p></p></a><span></span></div></li>
                <li><div class="good-item"><a href="#"><img src="" alt=""></a><a href="#"><p></p></a><span></span></div></li>
            </ul> -->
        </div>
        <div class="pagination"></div>
    </div>
    </main>
    <footer></footer>
    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js" integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="../../North-face/JS/pagination.js"></script>
    <script>

        $("header").load("../HTML/header.html");
        $("footer").load("../HTML/footer.html");
    </script>

    <script>
            // $('.test').click(function(){
            //     $.ajax({
            //         url:"../PHP/list.php",
            //         type:'GET',
            //         data:{},
            //         success(res){

                        // var result =eval('('+res+')');
                        // var str=''
                        // result.forEach(function(item,index){
                        //     str+=`<li><div class="good-item" ><a href="./details?goods_id=${item.goods_id}"><img src="${item.goods_p1}" alt=""></a><a href="./details?goods_id=${item.goods_id}"><p>${item.goods_t2}</p></a><span>￥${item.goods_price}</span></div></li>`
                        // })
                        // $('.list').html(`<ul>${str}</ul>`);

            //             show1(res)
            //         },
            //         error(err){
            //             console.log(err.status)
            //         }
            //     })
            // })
            var pagination = document.querySelector('.pagination');
            var box = document.querySelector('.list')
            function show1(txt){
                //把字符串转为对象
                var ar1 = eval('(' + txt + ')')
                //创建分页器的参数对象
                var o1 = {
                    pageInfo: {
                        pagenum: 1,
                        pagesize: 20,
                        totalsize: ar1.length,
                        totalpage: Math.ceil(ar1.length / 20)
                    },
                    textInfo: {
                        first: "首页",
                        prev: "上一页",
                        next: "下一页",
                        last: '尾页'
                    }
                }
                //创建实例分页对象
                new Pagination(pagination, o1, (n) => {
                    //获取当前页的数据
                    var ar2 = ar1.slice((n - 1) * 20, n * 20)
                    //创建字符串拼接所有信息
                    var str = ''
                    //遍历数组中所有数据
                    ar2.forEach(item => {
                        str+=`<li><div class="good-item" ><a href="./details?goods_id=${item.goods_id}"><img src="${item.goods_p1}" alt=""></a><a href="./details?goods_id=${item.goods_id}"><p>${item.goods_t2}</p></a><span>￥${parseInt(item.goods_price).toFixed(2)}</span></div></li>`
                                                                                                                                                       
                    })
                    //把拼接好的内容渲染到页面中
                    // $('.list').html(`<ul>${str}</ul>`);
                    box.innerHTML=`<ul>${str}</ul>`
                })
            }

            const getParamByUrl = (key) => {//从地址栏中获取参数
                const url = new URL(location.href)
                return url.searchParams.get(key)
                }
            window.onload=function(){
                let kw=getParamByUrl('kw')
                $.ajax({
                    url:"../PHP/select.php",
                    data:{kw},
                    success(res){
                       show1(res)
                    },
                    srror(err){
                        console.log(err.status)
                    }
                })
            }
            

    </script>
</body>

</html>